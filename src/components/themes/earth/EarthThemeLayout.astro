---
import type { PublicMainPageViewModel } from '@/types';
import '@/styles/themes/public-themes.css';
import PageHeader from './PageHeader.astro';
import SkillsSection from './SkillsSection.astro';
import ExperienceSection from './ExperienceSection.astro';
import EducationSection from './EducationSection.astro';
import ContactSection from './ContactSection.astro';
import ProjectsListPublic from './ProjectsListPublic.astro';

interface Props extends PublicMainPageViewModel {}

const { pageData, projects, theme, userUrl } = Astro.props;
---

<!doctype html>
<html lang="en" class="theme-earth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{pageData.name} - Personal Page</title>
    <meta name="description" content={pageData.bio} />

    <!-- Open Graph tags for social sharing -->
    <meta property="og:title" content={`${pageData.name} - Personal Page`} />
    <meta property="og:description" content={pageData.bio} />
    <meta property="og:type" content="profile" />
  </head>
  <body>
    <nav class="border-b border-border bg-card" aria-label="Main navigation">
      <div class="container mx-auto px-4 py-4">
        <a
          href="/"
          class="text-lg font-semibold text-primary hover:text-primary/80 transition-colors"
          aria-label="Return to home page"
        >
          Personal Pages
        </a>
      </div>
    </nav>

    <main class="container mx-auto px-4 py-8 max-w-4xl">
      <PageHeader name={pageData.name} bio={pageData.bio} />

      {pageData.skills && pageData.skills.length > 0 && (
        <SkillsSection skills={pageData.skills} />
      )}

      {pageData.experience && pageData.experience.length > 0 && (
        <ExperienceSection experience={pageData.experience} />
      )}

      {pageData.education && pageData.education.length > 0 && (
        <EducationSection education={pageData.education} />
      )}

      {pageData.contact_info && pageData.contact_info.length > 0 && (
        <ContactSection contactInfo={pageData.contact_info} />
      )}

      {projects && projects.length > 0 && (
        <ProjectsListPublic projects={projects} userUrl={userUrl} />
      )}
    </main>

    <footer class="border-t border-border mt-16 py-8">
      <div class="container mx-auto px-4 text-center text-sm text-muted-foreground">
        <p>Powered by Personal Pages</p>
      </div>
    </footer>
  </body>
</html>
